<html>
<!--
    This file is part of the OpenLink Structured Data Sniffer

    Copyright (C) 2015-2021 OpenLink Software

    This project is free software; you can redistribute it and/or modify it
    under the terms of the GNU General Public License as published by the
    Free Software Foundation; only version 2 of the License, dated June 1991.

    This program is distributed in the hope that it will be useful, but
    WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU
    General Public License for more details.

    You should have received a copy of the GNU General Public License along
    with this program; if not, write to the Free Software Foundation, Inc.,
    51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA
-->
    <head>
	<meta charset="UTF-8">
        <link type="text/css" href="lib/css/smoothness/jquery-ui.min.css" rel="stylesheet" />
        <link type="text/css" href="lib/css/smoothness/theme.css" rel="stylesheet" />
        <link type="text/css" href="lib/css/footable-0.1.css" rel="stylesheet" />

        <script type="text/javascript" src="lib/jquery-3.1.0.min.js"></script>
        <script type="text/javascript" src="lib/jquery-ui.min.js"></script>

        <script type="text/javascript" src="lib/fetch-sse.js"></script>
        <script type="text/javascript" src="lib/chat-gpt.js"></script>
        <script type="text/javascript" src="lib/markdown-it.js"></script>
        <script type="text/javascript" src="lib/highlight/highlight.js"></script>
        <script type="text/javascript" src="lib/purify.js"></script>


        <script type="text/javascript" src="browser.js"></script>
        <script type="text/javascript" src="utils.js"></script>
        <script type="text/javascript" src="utils_chat.js"></script>
        <script type="text/javascript" src="settings.js"></script>
        <script type="text/javascript" src="chat_page.js"></script>

        <link rel="stylesheet" href="dataview.css" />
        <link rel="stylesheet" href="lib/highlight/default.min.css" />

        <style type="text/css">
          :root {
              color-schema: light dark;
          }

          div.content {
            width: 100%;
            height: calc(100% - 20px);
            display: flex;
            flex-direction: row;
            font-size: 14px;
          }

          div#conversations {
            width:250px;
            background: rgb(32,33,35); /*black; */
            overflow:auto; 
            display:flex; 
            flex-direction:column
          }


         div.chat {
           overflow: auto;
           height: calc(100% - 76px - 2.5em);
         }

         div.chat_item{
           display:flex; 
           flex-direction:row; 
           align-items: top;
         }

         div.chat_item_ai{
           background: lightcyan;
         }
         
         div.chat_item_plugin{
           background: lightyellow;
         }
         
         div.chat_left {
           width:50px; 
           display: flex; 
           justify-content: center;
           padding-top: 10px;
         }

         div.chat_right {
           width:50px; 
           display: flex; 
           justify-content: space-between;
           /*justify-content: center;*/
           padding-top: 10px;
         }
         div.chat_center {
           width:calc(100% - 100px);
         }

         .chat_text > p > code {
           color: red;
         }

         div.code_header5 {
           background: darkgrey;
           border-radius: 5px;
           padding-top: 5;
         }

         div.code_header {
           background: darkgrey;
           border-radius: 5px;
           height: 25px;
           display: flex;
           flex-direction: row-reverse;
           padding: 5 10;
         }

         .code_header button{
           display: flex;
           align-items: center;
         }
         .code_header img.img20{
           width: 20px;
           height:  20px;
           padding-right: 5px;
         }

         .code_header select#code_type{
           width: 100px;
           margin-right: 20px;
           margin-left: 5px;
         }

         div.chat_code {
           background: darkgrey;
           border-radius: 5px;
           display: flex;
           flex-direction: column;
         }

         div.code_block {
           width: calc(100% - 10px);
           padding-left: 5px;
           padding-bottom: 5px;
         }

         pre.hljs {
           margin: 0;
           white-space: break-spaces;
           overflow: auto;
         }

         img.thumbUp {
           margin: 10;
           width:30; 
           height:30; 
           background: lightgreen;
           border-radius: 10px;
         
         }
         img.thumbDown {
           margin: 10;
           width:30; 
           height:30; 
           background:tomato;
           border-radius: 10px;
         }

         input.thumbUp {
           background: lightgreen;
         }
         input.thumbDown {
           background:tomato;
         }


         .htable {
           border-collapse: separate;
           border-spacing: 0;
           width: 100%;
           border-bottom: solid gray 1px;
           font-size: 14px;
           color: white;
         }

         .hrow_selected {
           background: gray;
         }

         .htable > tbody > tr > td {
           text-align: left;
         }

         .btn_new_chat {
           color:  lightgray; 
           display:flex; 
           align-items:center;
           margin: 7px;
           padding: 3px;
           border-radius: 4px;
           min-height: 40px;
           border-width: 1px;
           border-style: solid;
           border-color: gray;
         }

         .btn_msg_chat {
           color: lightgray; 
           display:flex; 
           align-items:center;
           margin: 5px;
           padding: 5px;
           border-radius: 4px;
           min-height: 40px;
         }
         .btn_selected {
           background: gray; 
         }

         .btn_new_chat:hover, .btn_msg_chat:hover{
           background: gray;
         }

         .image_btn {
           width: 22px;
           height: 22px;
           padding: 2;
           margin-right: 10px;
         }

         .model_list {
           display: flex;
           justify-content: center;
           align-items: center;
         }

         .model {
           min-width: 150px; 
           height: 2.5em;
           border-color: lightgray; 
           border-radius: 4px; 
         }

         textarea#chat_req {
           width: calc(100% - 100px); 
           border-color: gray; 
           border-radius:4px
         }

         button#chat_send {
           margin:5px; 
           margin-left:10px;
         }
         
         button#chat_stop {
           margin:5px; 
           margin-left:10px;
           color:white; 
           background-color:red;
         }

        </style>

    </head>
    <body class="sniffer">

      <div class="super_links_msg"> 
        <div style="width:16px;">
          <img src="images/throbber.gif" class="super_links_img">
        </div>
        <div id="super_links_msg_text"></div>
      </div>
      <div id="super_links_snackbar">
        <div id="msg1"></div>
        <div id="msg2"></div>
      </div>

<!-- POPUP & MESSAGES -->
      <div class="popup" id="alert-dlg" title="Info" style="display:none">
        <p id="alert-msg" style="font-size: 14px;">
        </p>
      </div>


      <div class="popup popup_flex_cols" id="thumb_up-dlg" style="display:none">
        <p/>
        <div class="popup_frm_row">
          <img src="images/thumb-up.png" class="thumbUp" >
          <div style="font-weight: bold;"> Provide additional feedback </div>
        </div>
        <div class="popup_frm_row">
          <textarea id="msg" style="white-space:wrap; width:100%; height:80px;" placeholder="What whould the ideal answer have been ?"></textarea>
        </div>
      </div>


      <div class="popup popup_flex_cols" id="thumb_down-dlg" class="popup_flex_cols" style="display:none">
        <p/>
        <div class="popup_frm_row">
          <img src="images/thumb-down.png" class="thumbDown" >
          <div style="font-weight: bold;"> Provide additional feedback </div>
        </div>
        <div class="popup_frm_row">
          <textarea id="msg" style="white-space:wrap; width:100%; height:80px;" placeholder="What whould the ideal answer have been ?"></textarea>
        </div>
        <p/>
        <div> <input id="down_harmful" type="checkbox">This is harmful / unsafe</div>
        <div> <input id="down_false" type="checkbox">This ins't true</div>
        <div> <input id="down_not_helpful" type="checkbox">This isn't helpful</div>
      </div>


<!---------END POPUP --------------------->

    <div style="width:100%; height:100%">
    <div class="content">
      <div id="conversations">
        <div class="btn_new_chat" id="new_chat">
          <input type="image" class="image_btn" src="images/plus.svg"> New Chat
        </div>

        <table class="htable">
          <tbody id="history_list">
          </tbody>
        </table>
      </div>
      
      <div style="width:calc(100% - 260px)">
        <div class="model_list">
          <SELECT id="model" class="model" >
<!--
              <OPTION id="gpt_3_5" value="text-davinci-002-render-sha" selected>Default (GPT-3.5)</OPTION>
              <OPTION id="gpt_3_5l" value="text-davinci-002-render-paid">Legacy (GPT-3.5)</OPTION>
              <OPTION id="gpt_4" value="gpt-4">GPT-4</OPTION>
-->
          </SELECT>

        </div>
        <table style="width: 100%;min-height:60px;">
          <tr>
           <td>
             <div style="display:flex;">
               <div style="width:50px;"> 
                 <img id="chat_throbber" src="images/throbber.gif" style="margin: 7 10 7 25;">
               </div>
               <textarea id="chat_req"></textarea>
               <button id="chat_send" >Send</button>
               <button id="chat_stop" class="hidden">Stop</button>
             </div>
           </td>
          </tr>
        </table>
        <hr style="width:100%;">

        <div class="chat">
        </div>
      </div>
    </div>
    </div>


      <div class="bottom_block">
        <div class="bottom_block_left">
          <a href="http://osds.openlinksw.com">OpenLink Structured Data Sniffer</a>
          <div id="ext_ver" style="width:50px">ver:0.0.0</div>
        </div>

        <div>
          Copyright&nbsp;&copy;&nbsp;2015-<span id="c_year">2021</span> 
          <a href="http://www.openlinksw.com"> OpenLink&nbsp;Software </a>
        </div>
      </div>

    </body>
</html>
